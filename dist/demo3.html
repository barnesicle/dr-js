<html>

<head>
  <title>Test</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>

<div class="row">
  <div class="col-md-6 mb-3">
    <div id="card-number" class="field"></div>
    <div id="cardnumber-invalid-feedback" class="card-invalid-feedback">
    </div>
  </div>

  <div class="col-md-3 mb-3">
    <div id="card-expiration" class="field"></div>
    <div id="cardexpiration-invalid-feedback" class="card-invalid-feedback">
    </div>
  </div>
  <div class="col-md-3 mb-3">
    <div id="card-cvv" class="field"></div>
    <div id="cardcvv-invalid-feedback" class="card-invalid-feedback">
    </div>
  </div>
</div>

<button onclick="mount()">Mount</button>
<button onclick="dostuff()">Do the Needful</button>

<script src="https://github.digitalriverws.net/pages/lbarnes/drjs-demo/dist/DigitalRiver.js"></script>

<script>
  let digitalriver;

  const options = {
    classes: {
      base: "DRElement",
      complete: "complete",
      empty: "empty",
      focus: "focus",
      invalid: "invalid",
      webkitAutofill: "autofill"
    },
    style: {
      base: {
        color: "rgb(33, 37, 41)",
        fontFamily: "Helvetica Neue, Helvetica, Arial, sans-serif",
        fontSize: "16px",
        fontSmoothing: "auto",
        fontVariant: "normal"
      },
      empty: {
        color: "rgb(33, 37, 41)"
      },
      complete: {
        color: "#000",
        ':-webkit-autofill': {
          color: '#000'
        }
      },
      invalid: {
        color: "#000",
        ':-webkit-autofill': {
          color: '#000'
        }
      }
    }
  };

  let cardCVV;
  let cardNumber;
  let cardExpiration;

  window.onload = function () {
    digitalriver = new DigitalRiver("pk_hc_e03ee62c0d964bb3ac75595b1203d13c");

    cardCVV = digitalriver.createElement("cardcvv", options);
    cardNumber = digitalriver.createElement("cardnumber", options);
    cardExpiration = digitalriver.createElement("cardexpiration", options);


    cardCVV.on('blur', function (event) {
      console.log('card cvv blur', event);
    });
    cardCVV.on('focus', function (event) {
      console.log('card cvv focus', event);
    });
    cardCVV.on('ready', function (event) {
      console.log('card cvv ready', event);
    });

    cardCVV.on('change', function (event) {
      console.log('card cvv change', event);

    });




    cardNumber.on('blur', function (event) {
      console.log('card number blur', event);
    });
    cardNumber.on('focus', function (event) {
      console.log('card number focus', event);
    });
    cardNumber.on('ready', function (event) {
      console.log('card number ready', event);
    });

    cardNumber.on('change', function (event) {
      console.log('card number change', event);
    });

    cardExpiration.on('blur', function (event) {
      console.log('card expirationblur', event);
    });
    cardExpiration.on('focus', function (event) {
      console.log('card expiration focus', event);
    });
    cardExpiration.on('ready', function (event) {
      console.log('card expiration ready', event);
    });

    cardExpiration.on('change', function (event) {
      console.log('card expiration change', event);
    });

  };



  function mount() {

    cardCVV.mount('card-cvv');
    cardNumber.mount('card-number');
    cardExpiration.mount('card-expiration');

  }


  function dostuff() {
    const payload = {
      "type": "creditCard",
      "owner" : {
        "firstName" : "firstName",
        "lastName" : "lastName",
        "email" : "email@email.org",
        "phoneNumber" : "123-456-7890",
        "address" : {
          "line1" : "1234 Fake St.",
          "city" : "Paris",
          "country" : "FR",
          "postalCode" : "75005"
        }
      },
      "creditCard": {
        "returnUrl": "https://somedomain.com"
      }
    }

   /* digitalriver.createCreditCardSource("e5a4365e-46f1-4c5a-b9eb-b2b69348d187", cardNumber, payload).then(function(response) {
      console.log(response);
    });*/
  }
</script>


</body>

</html>